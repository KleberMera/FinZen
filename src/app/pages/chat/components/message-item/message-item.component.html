<!-- src/app/chat/components/message-item/message-item.component.html -->
@if (message().type === 'bot') {
  <div class="flex items-start space-x-4 animate-fade-in mb-6 group hover:bg-gray-50/50 dark:hover:bg-gray-900/20 p-2 rounded-lg transition-all duration-200">
    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full">
      <div class="w-10 h-10 md:w-10 md:h-10 overflow-hidden">
        <logo-app class="w-full h-full"></logo-app>
      </div>
    </div>
    <div class="bg-blue-50 dark:bg-blue-900/40 rounded-2xl rounded-tl-none p-3 md:p-4 max-w-[80%] md:max-w-[75%] shadow-sm border border-blue-100/50 dark:border-blue-800/30">
      <p class="text-sm md:text-base text-gray-800 dark:text-gray-200 whitespace-pre-line leading-relaxed">{{message().text}}</p>
      <span class="text-xs text-gray-500 dark:text-gray-400 mt-3 block font-medium">{{message().time}}</span>
    </div>
  </div>
} @else if (message().type === 'bot-card') {
  <div class="flex items-start space-x-2 animate-fade-in mb-6 group hover:bg-gray-50/50 dark:hover:bg-gray-900/20 p-2 rounded-lg transition-all duration-200">
    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full">
      <div class="w-10 h-10 md:w-10 md:h-10 overflow-hidden">
        <logo-app class="w-full h-full"></logo-app>
      </div>
    </div>
    <div class="bg-blue-50 dark:bg-blue-900/40 rounded-2xl rounded-tl-none p-3 md:p-4 max-w-full sm:max-w-[80%] md:max-w-[75%] shadow-sm border border-blue-100/50 dark:border-blue-800/30">   
      <app-chat-transaction-card [transaction]="message().transaction"></app-chat-transaction-card>
      <span class="text-xs text-gray-500 dark:text-gray-400 mt-3 block font-medium">{{ message().time }}</span>
    </div>
  </div>
} @else {
  <div class="flex items-start justify-end space-x-4 animate-fade-in mb-6 group hover:bg-gray-50/50 dark:hover:bg-gray-900/20 p-2 rounded-lg transition-all duration-200">
    <div class="bg-indigo-50 dark:bg-indigo-900/40 rounded-2xl rounded-tr-none p-3 md:p-4 max-w-[80%] md:max-w-[75%] shadow-sm border border-indigo-100/50 dark:border-indigo-800/30">
      <p class="text-sm md:text-base text-gray-800 dark:text-gray-200 whitespace-pre-line leading-relaxed">{{message().text}}</p>
      
      <!-- Mostrar la imagen si el mensaje es de tipo imagen -->
      @if (message().imageUrl) {
        <div class="mt-4 rounded-xl overflow-hidden shadow-md">
          <img [src]="message().imageUrl" alt="Imagen enviada" class="max-w-full max-h-60 md:max-h-80 object-contain bg-gray-100 dark:bg-gray-700 transition-all hover:scale-[1.02] cursor-zoom-in">
        </div>
      }
      
      <span class="text-xs text-gray-500 dark:text-gray-400 mt-3 block text-right font-medium">{{message().time}}</span>
    </div>
    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 dark:from-indigo-500 dark:to-purple-700 flex items-center justify-center flex-shrink-0 shadow-md overflow-hidden border-2 border-white dark:border-gray-800 transition-transform group-hover:scale-105">
      @if (avatar() === '' || avatar() === null) {
        <svg class="w-6 h-6 md:w-7 md:h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      } @else {
        <img class="w-full h-full object-cover" [src]="avatar()" alt="Avatar del usuario">
      }
    </div>
  </div>
}