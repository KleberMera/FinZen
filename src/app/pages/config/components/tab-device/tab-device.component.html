<div class="p-6 bg-gray-800 rounded-lg shadow-lg">
    <div class="flex items-center justify-between mb-6">
      <h3 class="text-xl font-semibold text-white flex items-center gap-2">
        <i class="pi pi-wifi text-blue-400"></i>
        Dispositivos Conectados
      </h3>
      @if (!isCurrentDeviceRegistered()) {
        <button (click)="synchronizeDevice()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 transition-colors duration-200">
          <i class="pi pi-sync"></i>
          Sincronizar
        </button>
      }
    </div>
  
    <div class="space-y-4">
      @for (device of devicesResource.value()?.data; track device.id) {
        <div 
          class="flex items-center justify-between p-4 rounded-lg transition-all duration-200"
          [class]="isCurrentDevice(device) ? 'bg-green-800 border-l-4 border-green-500' : 'bg-gray-700 hover:bg-gray-600'"
        >
          <div class="flex items-center gap-4">
            <div class="text-2xl" [class]="isCurrentDevice(device) ? 'text-green-400' : 'text-gray-300'">
              <i [class]="device.isMobile ? 'pi pi-mobile' : 'pi pi-desktop'"></i>
            </div>
            <div>
              <div class="flex items-center gap-2">
                <h4 class="font-medium text-white">{{ device.brand }} {{ device.isMobile ? 'Smartphone' : 'PC' }}</h4>
                @if (isCurrentDevice(device)) {
                  <span class="px-2 py-1 bg-green-600 text-xs text-white rounded-full">Actual</span>
                }
              </div>
              <div class="flex items-center gap-3 mt-1">
                <p class="text-sm text-gray-300">{{ device.os }}</p>
                <span class="h-1 w-1 bg-gray-500 rounded-full"></span>
                <p class="text-sm text-gray-300">{{ device.browser }}</p>
              </div>
            </div>
          </div>
          <div>
            <button class="text-gray-400 hover:text-white p-2 rounded-full hover:bg-gray-600 transition-colors">
              <i class="pi pi-ellipsis-v"></i>
            </button>
          </div>
        </div>
      }
    </div>
  
    @if (devicesResource.value()?.data!.length === 0) {
      <div class="py-12 text-center text-gray-400 bg-gray-700 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 mx-auto mb-4 opacity-50" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M7 2a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zm3 14a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
        </svg>
        <p class="text-lg font-medium">No hay dispositivos conectados actualmente</p>
        <p class="mt-2 text-sm">Para recibir notificaciones debes sincronizar al menos un dispositivo</p>
        <button (click)="synchronizeDevice()" class="mt-6 px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 mx-auto transition-colors duration-200">
          <i class="pi pi-mobile"></i>
          Sincronizar este dispositivo
        </button>
      </div>
    }
  </div>